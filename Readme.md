# Drawing An Image of House Using Python Turtle

House of Postdocs presents you with a python tool that draws an image of house using python standard library "turtle". See [the design document](Design.md) for more info of software design details.

Authors: 
- Rikiya Yamashita ([rikiya@stanford.edu](mailto: rikiya@stanford.edu)) 
- Binglan Li ([binglan@stanford.edu](mailto: binglan@stanford.edu))

### AUTOGENERATED BY SWE for Science kickstart generator - www.sweforscience.com - www.twitter.com/sweforscience

## How to set up the python environment

There are two ways to set up the python environment.

1. Using pyenv/venv (Binglan)

- Install and configure Tkinter (mandatory) and Ghostscript (optional). See **Technical Notes** at the end for details. 

- Use pyenv to manage python version
```
# install pyenv using homebrew
brew update
brew install pyenv

# install a specific python version
pyenv install 3.8.7

# set global python version
pyenv global 3.8.7

# check current python version
pyenv versions

# Alternatively, one can choose a specific python version for a project folder
# go to the project folder
pyenv local 3.8.7
```

- Use venv to mange python environment. Venv is a python package that provides lightweight "virtual environments".
```
# go to your project folder
cd ~/biods253_house_postdoc

# venv is a standard python library for python >= 3.3

# activate venv under the project folder
/usr/bin/env python3 -m venv venv && . venv/bin/activate

# proceed with installing packages like you normally do
# all of the following packages are option. They are only needed for unit tests if you are interested.
pip install numpy
pip install Pillow
pip install ghostscript

# venv freeze - obtain a list of installed packages
. venv/bin/activate && pip freeze > requirements.txt
```

1. Using conda (Rikiya)
- Install [Miniconda](https://docs.conda.io/en/latest/miniconda.html#linux-installers) on your machine (download the distribution that comes with python3).  
- Create a conda environment:
```
conda create -n my_turtle python=3.8
```  
- Activate the environment:
```
conda activate my_turtle
```
- Install dependencies:
```
conda install numpy
conda install pillow
conda install -c conda-forge ghostscript  
```

## Demo
### Run with default configuration
```
python py/house_postdoc_cli.py
```

### You can change the numbers of windows, doors, trees, clouds, and draw speed by specifying the arguments
```
python py/house_postdoc_cli.py --num_windows 8 --num_doors 5 --num_trees 5 --num_clouds 10 --draw_speed 6
```
or
```
python py/house_postdoc_cli.py -w 8 -d 5 -t 5 -c 10 -s 6
```
defaults are: `--num_windows 4 --num_doors 1 --num_trees 3 --num_clouds 5 --draw_speed 0`

### You can also run an interactive mode with:
`python py/house_postdoc_cli.py --interactive`
or
`python py/house_postdoc_cli.py -i`

## Tests
`python py/house_postdoc_unittest.py`

## Technical Notes
### 1. Install and Configure Tkinter in Mac
```
# Download took several minutes
brew install tcl-tk
# Configure tcl-tk path in the system profile
# I am still using old-fashioned ~/.profile, instead of ~/.zshrc. 
echo 'export PATH="/Users/binglan/homebrew/opt/tcl-tk/bin:$PATH"' >> ~/.profile
# reload shell 
source ~/.profile
# check if tcl-tk is in $PATH
echo $PATH | grep --color=auto tcl-tk

# uninstall python
pyenv uninstall 3.8.7
# look up tcl-tk version
brew info tcl-tk
    tcl-tk: stable 8.6.11 [keg-only]
    Tool Command Language
    https://www.tcl-lang.org
# configure environment and install python
# replace the "-ltcl8.6 -ltk8.6" with the correct latest version from `brew info tcl-tk`
# LDFLAGS and CPPFLAGS are for compilers to find tcl-tk you may need to set
# PKG_CONFIG_PATH is for pkg-config to find tcl-tk you may need to set
# It's important to point to the homebrew tcl-tk in PYTHON_CONFIGURE_OPTS
env \
  PATH="$(brew --prefix tcl-tk)/bin:$PATH" \
  LDFLAGS="-L$(brew --prefix tcl-tk)/lib" \
  CPPFLAGS="-I$(brew --prefix tcl-tk)/include" \
  PKG_CONFIG_PATH="$(brew --prefix tcl-tk)/lib/pkgconfig" \
  CFLAGS="-I$(brew --prefix tcl-tk)/include" \
  PYTHON_CONFIGURE_OPTS="--with-tcltk-includes='-I$(brew --prefix tcl-tk)/include' --with-tcltk-libs='-L$(brew --prefix tcl-tk)/lib -ltcl8.6 -ltk8.6'" \
pyenv install 3.8.7

# use 3.8.7 as the global default
pyenv global 3.8.7

# check if turtle can be successfully imported without issue
python
import tkinter
tkinter.TclVersion, tkinter.TkVersion # should see the same versions, like (8.6, 8.6)
tkinter._test() # should get a GUI
```

### 2. Install and Configure Ghostscript in Mac (Ongoing Issue)
```
# check if gs is install in the system
gs --version
# if not install ghostscript using either
brew update
brew install ghostscript
# check gs library path
which gs

# however, python still cannot locate gs lib
# tried exporting gs path to $PATH in system profile or PYTHONPATH
# neither worked
## in terminal
#echo 'export PATH="/Users/binglan/homebrew/bin/gs:$PATH"' >> ~/.profile
#source ~/.profile
## in python
#import os
#os.environ["PATH"] += ":$gs_path"
```

